#!/bin/bash
HERE="$(dirname "$(readlink -f "${0}")")"

export LD_PRELOAD=$HERE/usr/plugins/platforms/libqxcb.so

export PATH=$HERE/usr:$HERE/usr/bin:$HERE/usr/bin/resources:$HERE/usr/bin/resources/docs:$HERE/usr/bin/resources/fonts:$HERE/usr/bin/resources/fullscreenui:$HERE/usr/bin/resources/icons:$HERE/usr/bin/resources/icons/flags:$HERE/usr/bin/resources/shaders:$HERE/usr/bin/resources/shaders/common:$HERE/usr/bin/resources/shaders/opengl:$HERE/usr/bin/resources/shaders/vulkan:$HERE/usr/bin/resources/sounds:$HERE/usr/bin/resources/sounds/achievements:$HERE/usr/bin/translations:$HERE/usr/lib:$HERE/usr/plugins:$HERE/usr/plugins/iconengines:$HERE/usr/plugins/imageformats:$HERE/usr/plugins/platforminputcontexts:$HERE/usr/plugins/platforms:$HERE/usr/plugins/platformthemes:$HERE/usr/plugins/wayland-decoration-client:$HERE/usr/plugins/wayland-graphics-integration-client:$HERE/usr/plugins/wayland-shell-integration:$HERE/usr/plugins/xcbglintegrations:$HERE/usr/share:$HERE/usr/share/applications:$HERE/usr/share/doc:$HERE/usr/share/icons:$HERE/usr/share/metainfo:$HERE/usr/share/mime:$HERE/usr/share/mime/application:$HERE/usr/share/mime/audio:$HERE/usr/share/mime/font:$HERE/usr/share/mime/image:$HERE/usr/share/mime/inode:$HERE/usr/share/mime/message:$HERE/usr/share/mime/model:$HERE/usr/share/mime/multipart:$HERE/usr/share/mime/packages:$HERE/usr/share/mime/text:$HERE/usr/share/mime/video:$HERE/usr/share/mime/x-content:$HERE/usr/share/mime/x-epoc:$HERE/usr/share/glib-2.0:$HERE/usr/share/glib-2.0/schemas:"${PATH}"

export LIBRARY_PATH=$HERE/usr:$HERE/usr/bin:$HERE/usr/bin/resources:$HERE/usr/bin/resources/docs:$HERE/usr/bin/resources/fonts:$HERE/usr/bin/resources/fullscreenui:$HERE/usr/bin/resources/icons:$HERE/usr/bin/resources/icons/flags:$HERE/usr/bin/resources/shaders:$HERE/usr/bin/resources/shaders/common:$HERE/usr/bin/resources/shaders/opengl:$HERE/usr/bin/resources/shaders/vulkan:$HERE/usr/bin/resources/sounds:$HERE/usr/bin/resources/sounds/achievements:$HERE/usr/bin/translations:$HERE/usr/lib:$HERE/usr/plugins:$HERE/usr/plugins/iconengines:$HERE/usr/plugins/imageformats:$HERE/usr/plugins/platforminputcontexts:$HERE/usr/plugins/platforms:$HERE/usr/plugins/platformthemes:$HERE/usr/plugins/wayland-decoration-client:$HERE/usr/plugins/wayland-graphics-integration-client:$HERE/usr/plugins/wayland-shell-integration:$HERE/usr/plugins/xcbglintegrations:$HERE/usr/share:$HERE/usr/share/applications:$HERE/usr/share/doc:$HERE/usr/share/icons:$HERE/usr/share/metainfo:$HERE/usr/share/mime:$HERE/usr/share/mime/application:$HERE/usr/share/mime/audio:$HERE/usr/share/mime/font:$HERE/usr/share/mime/image:$HERE/usr/share/mime/inode:$HERE/usr/share/mime/message:$HERE/usr/share/mime/model:$HERE/usr/share/mime/multipart:$HERE/usr/share/mime/packages:$HERE/usr/share/mime/text:$HERE/usr/share/mime/video:$HERE/usr/share/mime/x-content:$HERE/usr/share/mime/x-epoc:$HERE/usr/share/glib-2.0:$HERE/usr/share/glib-2.0/schemas:"${LIBRARY_PATH}"

export LIBRARY_PATH=$LIBRARY_PATH:$LD_LIBARY_PATH

export XDG_DATA_DIRS=$HERE/usr:$HERE/usr/bin:$HERE/usr/bin/resources:$HERE/usr/bin/resources/docs:$HERE/usr/bin/resources/fonts:$HERE/usr/bin/resources/fullscreenui:$HERE/usr/bin/resources/icons:$HERE/usr/bin/resources/icons/flags:$HERE/usr/bin/resources/shaders:$HERE/usr/bin/resources/shaders/common:$HERE/usr/bin/resources/shaders/opengl:$HERE/usr/bin/resources/shaders/vulkan:$HERE/usr/bin/resources/sounds:$HERE/usr/bin/resources/sounds/achievements:$HERE/usr/bin/translations:$HERE/usr/lib:$HERE/usr/plugins:$HERE/usr/plugins/iconengines:$HERE/usr/plugins/imageformats:$HERE/usr/plugins/platforminputcontexts:$HERE/usr/plugins/platforms:$HERE/usr/plugins/platformthemes:$HERE/usr/plugins/wayland-decoration-client:$HERE/usr/plugins/wayland-graphics-integration-client:$HERE/usr/plugins/wayland-shell-integration:$HERE/usr/plugins/xcbglintegrations:$HERE/usr/share:$HERE/usr/share/applications:$HERE/usr/share/doc:$HERE/usr/share/icons:$HERE/usr/share/metainfo:$HERE/usr/share/mime:$HERE/usr/share/mime/application:$HERE/usr/share/mime/audio:$HERE/usr/share/mime/font:$HERE/usr/share/mime/image:$HERE/usr/share/mime/inode:$HERE/usr/share/mime/message:$HERE/usr/share/mime/model:$HERE/usr/share/mime/multipart:$HERE/usr/share/mime/packages:$HERE/usr/share/mime/text:$HERE/usr/share/mime/video:$HERE/usr/share/mime/x-content:$HERE/usr/share/mime/x-epoc:$HERE/usr/share/glib-2.0:$HERE/usr/share/glib-2.0/schemas:"${XDG_DATA_DIRS}"

export QT_PLUGIN_PATH=$HERE/usr:$HERE/usr/bin:$HERE/usr/bin/resources:$HERE/usr/bin/resources/docs:$HERE/usr/bin/resources/fonts:$HERE/usr/bin/resources/fullscreenui:$HERE/usr/bin/resources/icons:$HERE/usr/bin/resources/icons/flags:$HERE/usr/bin/resources/shaders:$HERE/usr/bin/resources/shaders/common:$HERE/usr/bin/resources/shaders/opengl:$HERE/usr/bin/resources/shaders/vulkan:$HERE/usr/bin/resources/sounds:$HERE/usr/bin/resources/sounds/achievements:$HERE/usr/bin/translations:$HERE/usr/lib:$HERE/usr/plugins:$HERE/usr/plugins/iconengines:$HERE/usr/plugins/imageformats:$HERE/usr/plugins/platforminputcontexts:$HERE/usr/plugins/platforms:$HERE/usr/plugins/platformthemes:$HERE/usr/plugins/wayland-decoration-client:$HERE/usr/plugins/wayland-graphics-integration-client:$HERE/usr/plugins/wayland-shell-integration:$HERE/usr/plugins/xcbglintegrations:$HERE/usr/share:$HERE/usr/share/applications:$HERE/usr/share/doc:$HERE/usr/share/icons:$HERE/usr/share/metainfo:$HERE/usr/share/mime:$HERE/usr/share/mime/application:$HERE/usr/share/mime/audio:$HERE/usr/share/mime/font:$HERE/usr/share/mime/image:$HERE/usr/share/mime/inode:$HERE/usr/share/mime/message:$HERE/usr/share/mime/model:$HERE/usr/share/mime/multipart:$HERE/usr/share/mime/packages:$HERE/usr/share/mime/text:$HERE/usr/share/mime/video:$HERE/usr/share/mime/x-content:$HERE/usr/share/mime/x-epoc:$HERE/usr/share/glib-2.0:$HERE/usr/share/glib-2.0/schemas:"${QT_PLUGIN_PATH}"

exec "$HERE/usr/bin/pcsx2-qt" "$@"
